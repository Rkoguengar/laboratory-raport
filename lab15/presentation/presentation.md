---
## Front matter
lang: ru-RU
title: Лабораторная работа №15
subtitle: Управление логическими томами (LVM)
author:
  - Ришард Когенгар
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 22 января 2026

## Formatting pdf
toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель работы

## Основная цель

Получить практические навыки управления логическими томами LVM:
- создание физических томов (PV), групп томов (VG) и логических томов (LV)
- создание файловых систем и постоянное монтирование
- изменение размеров LV с изменением размера файловой системы
- проверка результатов стандартными средствами системы

# Ход выполнения работы

## Подготовка системы

- Проверены текущие точки монтирования дополнительных дисков
- В `/etc/fstab` отключены записи авто-монтирования для `/mnt/data` и `/mnt/data-ext`
- Выполнено отмонтирование ранее подключённых файловых систем
- Подтверждено отсутствие монтирования устройств `/dev/sdb` и `/dev/sdc`

![Отключение ранее смонтированных файловых систем](Screenshot_1.png){ width=80% }

## Разметка диска /dev/sdb под LVM

- Выполнена повторная разметка диска `/dev/sdb`
- Создан основной раздел **300 МБ**
- Установлен тип раздела **Linux LVM (8e)**
- Изменения записаны в таблицу разделов

![Создание LVM-раздела на диске /dev/sdb](Screenshot_2.png){ width=80% }

## Создание физического тома (PV)

- Обновлена таблица разделов ядра
- Раздел `/dev/sdb1` инициализирован как физический том LVM
- Проверена доступность PV в системе

![Создание физического тома LVM](Screenshot_3.png){ width=80% }

## Создание группы томов vgdata

- На основе PV `/dev/sdb1` создана группа томов **vgdata**
- Проверено, что PV включён в состав группы

![Создание группы томов vgdata](Screenshot_4.png){ width=80% }

## Создание логического тома lvdata

- В группе томов **vgdata** создан логический том **lvdata**
- Тому выделено **50% свободного пространства** группы
- Проверено наличие LV в системе

![Создание логического тома lvdata](Screenshot_5.png){ width=80% }

## Файловая система и постоянное монтирование /mnt/data

- На `/dev/vgdata/lvdata` создана файловая система **ext4**
- Создан каталог `/mnt/data`
- В `/etc/fstab` добавлена запись для постоянного монтирования
- Выполнена проверка успешного монтирования

![Форматирование и монтирование логического тома](Screenshot_6.png){ width=80% }

## Расширение vgdata и lvdata

- Создан второй LVM-раздел на `/dev/sdb` (раздел `/dev/sdb2`)
- Раздел инициализирован как физический том
- Группа **vgdata** расширена добавлением нового PV

![Создание второго LVM-раздела](Screenshot_7.png){ width=80% }

## Увеличение lvdata и изменение размера ФС

- Проверено увеличение свободного пространства в **vgdata**
- Логический том **lvdata** расширен на часть свободного пространства
- Размер файловой системы увеличен автоматически вместе с LV

![Расширение группы томов vgdata](Screenshot_8.png){ width=80% }

## Уменьшение lvdata

- Выполнено уменьшение размера **lvdata** на 50 МБ
- В процессе выполнены необходимые операции для корректного изменения размера
- Итог проверен по размеру LV и доступному месту в каталоге монтирования

# Самостоятельная работа

## Разметка /dev/sdc под LVM

- Для работы использован дополнительный диск `/dev/sdc`
- Созданы два основных раздела
- Для каждого раздела установлен тип **Linux LVM (8e)**
- Изменения сохранены

![Разметка диска /dev/sdc и назначение типа Linux LVM](Screenshot_9.png){ width=80% }

## Создание vggroup и lvgroup

- На `/dev/sdc1` создан физический том LVM
- Создана группа томов **vggroup**
- Создан логический том **lvgroup** в составе **vggroup**

![Создание физического тома, группы томов и логического тома](Screenshot_10.png){ width=80% }

## Форматирование lvgroup в XFS

- Логический том `/dev/vggroup/lvgroup` отформатирован в **XFS**
- Том подготовлен для постоянного монтирования

![Форматирование логического тома в XFS](Screenshot_11.png){ width=80% }

## Постоянное монтирование /mnt/groups

- Создан каталог `/mnt/groups`
- В `/etc/fstab` добавлена запись для авто-монтирования XFS
- Проверено, что том смонтирован в `/mnt/groups`

![Настройка постоянного монтирования логического тома](Screenshot_12.png){ width=80% }

## Проверка после перезагрузки

- Выполнена проверка монтирований в `/mnt`
- Подтверждено автоматическое подключение `lvgroup` в `/mnt/groups`
- Проверено использование дискового пространства

![Проверка монтирования после перезагрузки](Screenshot_13.png){ width=80% }

## Расширение vggroup и lvgroup

- На `/dev/sdc2` создан физический том LVM
- Группа **vggroup** расширена добавлением нового PV
- Логический том **lvgroup** расширен с автоматическим изменением размера XFS

![Добавление нового физического тома в группу vggroup](Screenshot_14.png){ width=80% }

## Итоговая проверка расширения

- Проверены PV/VG/LV после расширения
- Подтверждено увеличение размера файловой системы в `/mnt/groups`
- Система корректно использует добавленное дисковое пространство

![Расширение логического тома и файловой системы XFS](Screenshot_15.png){ width=80% }

# Итоги работы

## Вывод

- Созданы PV, VG и LV для LVM-хранилища
- Настроены файловые системы **ext4** и **XFS** и их постоянное монтирование
- Выполнены операции увеличения и уменьшения логических томов
- Проверена корректность изменений по состоянию томов и файловых систем  
