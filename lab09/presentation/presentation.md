---
## Front matter
lang: ru-RU
title: Лабораторная работа №9
subtitle: Управление SELinux
author:
  - Ришард Когенгар
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 20 января 2026

## Formatting pdf
toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель работы

## Основная цель

Получить практические навыки администрирования SELinux:  
- управление режимами работы;
- настройка контекстов безопасности;
- использование boolean-переключателей;
- диагностика проблем доступа.

# Ход выполнения работы

## Переключение режимов SELinux

- Проверка режима работы
- Перевод SELinux в разрешающий режим
- Анализ поведения системы
- Возврат в принудительный режим

Режим **permissive** используется для диагностики и отладки.

![Переключение SELinux](Screenshot_1.png){ width=80% }

## Полное отключение SELinux

- Изменение конфигурационного файла
- Установка режима disabled
- Перезагрузка системы
- Проверка состояния после загрузки

Переключение режимов невозможно при отключённом SELinux.

![SELinux отключён](Screenshot_3.png){ width=80% }

## Возврат SELinux в enforcing

- Изменение параметра SELINUX
- Перезагрузка системы
- Автоматическая перемаркировка файлов
- Проверка статуса после загрузки

Система вернулась в безопасный режим enforcing.

![Автоперемаркировка SELinux](Screenshot_5.png){ width=80% }

## Проверка контекста файлов

- Анализ контекста файла `/etc/hosts`
- Копирование файла в домашний каталог
- Изменение контекста при копировании

Контекст изменяется, так как файл считается новым объектом.

![Контекст /etc/hosts](Screenshot_7.png){ width=80% }

## Восстановление контекста с restorecon

- Перезапись файла с неверным контекстом
- Восстановление контекста безопасности
- Проверка результата

Контекст успешно возвращён к `net_conf_t`.

![restorecon](Screenshot_8.png){ width=80% }

## Подготовка веб-сервера

- Установка Apache и lynx
- Создание каталога `/web`
- Создание пользовательской страницы
- Изменение DocumentRoot

Используется нестандартный каталог для контента.

![Конфигурация Apache](Screenshot_9.png){ width=80% }

## Проблема доступа SELinux

- Запуск веб-сервера
- Проверка доступа через lynx
- Отображение стандартной страницы Apache

SELinux блокирует доступ к `/web`.

![Стандартная страница Apache](Screenshot_10.png){ width=80% }

## Настройка контекста для /web

- Назначение контекста `httpd_sys_content_t`
- Восстановление контекстов
- Повторная проверка доступа

Apache получил доступ к пользовательскому контенту.

![Контекст для /web](Screenshot_11.png){ width=80% }

## Результат настройки

- Проверка через lynx
- Отображение пользовательской страницы
- Подтверждение корректной работы

![Пользовательская страница](Screenshot_12.png){ width=80% }

## Постоянная настройка переключателя

- Включение boolean-переключателя постоянно
- Проверка временного и постоянного состояния
- Анализ результата

Переключатель включён полностью.

![SELinux booleans](Screenshot_13.png){ width=80% }

# Итоги работы

## Вывод

- Изучены режимы работы SELinux
- Освоена работа с контекстами безопасности
- Настроен доступ Apache к нестандартному каталогу
- Рассмотрены boolean-переключатели SELinux  
