---
## Front matter
lang: ru-RU
title: Лабораторная работа №4
subtitle: Работа с программными пакетами (dnf и rpm)
author:
  - Ришард Когенгар
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 19 января 2026

## Formatting pdf
toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель работы

## Основная цель

Получить практические навыки работы с репозиториями и менеджерами пакетов в Rocky Linux: **dnf** и **rpm**.

# Ход выполнения работы

## Репозитории в системе

- Каталог конфигураций репозиториев: `/etc/yum.repos.d`
- Изучен `rocky-extras.repo` (имя, зеркала, GPG, метаданные, enable)

![Репозитории в системе](Screenshot_1.png){ width=80% }

## Поиск пакетов по ключевому слову

- Выполнен поиск пакетов по ключу `user`
- Совпадения находились в:
  - имени пакета
  - описании
  - обоих полях

![Поиск пакетов по ключевому слову user](Screenshot_2.png){ width=80% }

## Поиск и изучение пакета nmap

- Подготовка к установке сетевого сканера `nmap`
- Найдены пакеты:
  - `nmap`
  - `nmap-ncat`
- Просмотр информации о `nmap` (версия, архитектура, репозиторий, размер, назначение)

![Поиск и информация о пакете nmap](Screenshot_3.png){ width=80% }

## Установка nmap: точное имя и маска

- Установка по точному имени: `dnf install nmap`
- Установка по маске: `dnf install nmap*`

- точное имя → ставится только указанный пакет
- маска → могут установиться дополнительные компоненты (`nmap-ncat` и др.)

![Установка nmap](Screenshot_4.png){ width=80% }

## Удаление nmap и связанных пакетов

- Удалён `nmap`
- Далее удалены все пакеты по шаблону `nmap*`
- В результате удалены и основной пакет, и доп. компоненты

![Удаление nmap и связанных пакетов](Screenshot_5.png){ width=80% }

## Группы пакетов DNF

- Получен список групп и сред:
  - установленная среда: **Server with GUI**
  - доступные группы (пример: **RPM Development Tools**)

![Список групп пакетов](Screenshot_6.png){ width=80% }

## Группа RPM Development Tools

- Просмотр информации о группе **RPM Development Tools**
- Установка группы → установлен `rpmdevtools`, группа активирована

![Информация и установка группы RPM Development Tools](Screenshot_7.png){ width=80% }

## Удаление группы RPM Development Tools

- Выполнено удаление группы
- Удалены пакеты, установленные в её составе
- Освобождено дисковое пространство

![Удаление группы RPM Development Tools](Screenshot_8.png){ width=80% }

## История DNF и откат транзакций

- Просмотр истории транзакций DNF
- Выполнен откат выбранной транзакции
- Результат: ранее удалённая группа была восстановлена

![История dnf и откат транзакции](Screenshot_9.png){ width=80% }

## Проверка доступности и загрузка RPM без установки

- Проверка: `dnf list lynx` (пакет доступен в **AppStream**)
- Загрузка без установки: `dnf install lynx --downloadonly`
- RPM сохранён в локальном кэше

![Проверка наличия lynx и загрузка RPM без установки](Screenshot_10.png){ width=80% }

## Поиск скачанного RPM и ручная установка

- Поиск файла в кэше:
  - `find /var/cache/dnf/ -name lynx*`
- Установка вручную:
  - `rpm -Uhv lynx-<версия>.rpm`

![Установка lynx из RPM-файла](Screenshot_11.png){ width=80% }

## Проверка установки и сведения о пакете

- Путь к бинарнику: `which lynx`
- Принадлежность файла пакету:
  - `rpm -qf $(which lynx)`
- Информация о пакете:
  - `rpm -qi lynx`

![Просмотр сведений о пакете lynx](Screenshot_12.png){ width=80% }

## Файлы, документация и man

- Все файлы пакета: `rpm -ql lynx`

![Список всех файлов пакета lynx](Screenshot_13.png){ width=80% }

## Файлы, документация и man

- Документация: `rpm -qd lynx`

![Список документации пакета lynx](Screenshot_14.png){ width=80% }

## Файлы, документация и man

- Просмотр руководства: `man lynx`

![Просмотр man-страницы lynx](Screenshot_15.png){ width=80% }

## Конфигурация, scripts и проверка запуска

![Запуск lynx под пользовательской учётной записью](Screenshot_16.png){ width=80% }

## Удаление lynx

- Удаление пакета: `rpm -e lynx`

![Удаление lynx и проверка содержимого каталога](Screenshot_17.png){ width=80% }

## Проверка и установка dnsmasq

- Пакет `dnsmasq` обнаружен в системе (AppStream)
- Повторная установка подтвердила отсутствие необходимости действий
- Бинарный файл расположен в: `/sbin`

![Проверка наличия и установки dnsmasq](Screenshot_18.png){ width=80% }

## Принадлежность файла и расширенная информация

- Принадлежность:
  - `/sbin/dnsmasq` → пакет `dnsmasq-...`
- Информация:
  - версия, релиз, лицензия, поставщик, назначение
- Назначение: лёгковесный DNS-кэш + DHCP/TFTP для локальных сетей

![Информация о пакете dnsmasq](Screenshot_19.png){ width=80% }

## Файлы пакета и документация

- Все файлы: `rpm -ql dnsmasq`
- Документация: `rpm -qd dnsmasq`
- Руководство: `man dnsmasq`

![Список файлов пакета dnsmasq](Screenshot_20.png){ width=80% }

## Файлы пакета и документация

![Просмотр man-страницы dnsmasq](Screenshot_21.png){ width=80% }

## Конфигурационные файлы

- Список конфигурации: `rpm -qc dnsmasq`
- Основной файл: `/etc/dnsmasq.conf`
- Используется для настройки DNS/DHCP/TFTP

![Конфигурационные файлы dnsmasq](Screenshot_22.png){ width=80% }

# Итоги работы

## Вывод

- Изучены принципы управления ПО через **dnf** и **rpm** в Rocky Linux
- Отработаны сценарии:
  - работа с репозиториями и поиском пакетов
  - установка/удаление пакетов и групп
  - установка из локального RPM и детальный анализ состава пакетов
- На практике проанализированы пакеты **lynx** и **dnsmasq**:
  - бинарные файлы, документация, конфигурации, скрипты
- Подтверждено:
  - **dnf** удобен для зависимостей и управления из репозиториев
  - **rpm** даёт низкоуровневый контроль над пакетом и его содержимым