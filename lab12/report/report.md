---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Ришард Когенгар"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Ход выполнения

## Проверка конфигурации сети

1. Получены полномочия администратора с помощью команды `su` и введён пароль пользователя **root**.  
   Все последующие действия выполнялись в привилегированном режиме.

   ![Получение прав администратора и вывод статистики интерфейсов](Screenshot_1.png)

2. Выведена информация о существующих сетевых интерфейсах и статистике передачи и приёма пакетов с помощью команды `ip -s link`.

   В системе обнаружены следующие интерфейсы:
   - **lo** — loopback-интерфейс, используемый для внутреннего сетевого взаимодействия в пределах операционной системы.
   - **enp0s3** — основной Ethernet-интерфейс виртуальной машины.

   **Пояснение по интерфейсу enp0s3:**
   - Интерфейс находится в состоянии **UP**, физическое соединение активно (**LOWER_UP**).
   - Значение MTU равно 1500 байт, что соответствует стандарту Ethernet.
   - MAC-адрес интерфейса — `08:00:27:8e:fd:ca`.
   - В секции RX отображаются данные о принятых пакетах. Зафиксировано 3 ошибки приёма, что может быть связано с особенностями виртуальной сети.
   - В секции TX ошибки передачи отсутствуют.

3. Выведена таблица маршрутизации командой `ip route show`.

   ![Таблица маршрутизации](Screenshot_2.png)

   **Пояснение:**
   - Маршрут по умолчанию направлен через шлюз `10.0.2.2` и используется для доступа во внешние сети.
   - Маршрут `10.0.2.0/24` является напрямую подключённой сетью, обслуживаемой интерфейсом enp0s3.
   - Все маршруты получены автоматически по DHCP.

4. Выведена информация о назначенных IP-адресах интерфейсов с помощью команды `ip addr show`.

   **Пояснение по интерфейсу enp0s3:**
   - IPv4-адрес: `10.0.2.15/24`, назначен динамически.
   - Широковещательный адрес: `10.0.2.255`.
   - Также автоматически назначены IPv6-адреса (глобальный и link-local).

   **IPv4-адрес устройства:** 10.0.2.15  
   **Сетевой адаптер:** enp0s3

5. Выполнена проверка доступности сети Интернет с помощью команды `ping -c 4 8.8.8.8`.

   Результат показал передачу и приём всех четырёх пакетов без потерь, что подтверждает корректную настройку сетевого подключения.

   ![Проверка доступа к Интернету](Screenshot_3.png)

6. К интерфейсу enp0s3 добавлен дополнительный IPv4-адрес `10.0.0.10/24`.

7. Выполнена проверка назначенных адресов.  
   В выводе команды `ip addr show` для интерфейса enp0s3 присутствуют два IPv4-адреса:
   - `10.0.2.15/24` — получен по DHCP;
   - `10.0.0.10/24` — добавлен вручную.

   ![Проверка добавленного IP-адреса](Screenshot_4.png)

8. Выполнен вывод параметров сетевых интерфейсов с помощью утилиты `ifconfig`.

   **Сравнение с ip:**
   - `ifconfig` отображает базовые сетевые параметры и счётчики трафика.
   - Утилита `ip` предоставляет более детальную и актуальную информацию, поэтому рекомендуется к использованию в современных системах Linux.

   ![Вывод ifconfig](Screenshot_5.png)

9. Выведен список всех прослушиваемых TCP- и UDP-портов с помощью команды `ss -tul`.

   В системе обнаружены активные сетевые службы, включая:
   - SSH (удалённое администрирование),
   - HTTP,
   - FTP,
   - службы печати (IPP),
   - mDNS и системные UDP-службы.

   ![Прослушиваемые порты](Screenshot_6.png)

## Управление сетевыми подключениями с помощью nmcli

1. Выведена информация о текущих сетевых подключениях NetworkManager с помощью `nmcli connection show`.

   Отображены подключения для интерфейсов **enp0s3** и **lo**.

   ![Список сетевых подключений](Screenshot_7.png)

2. Добавлено Ethernet-соединение с именем **dhcp**, привязанное к интерфейсу enp0s3 и использующее автоматическое получение параметров сети.

3. Добавлено Ethernet-соединение **static** для интерфейса enp0s3 со статическим IPv4-адресом `10.0.0.10/24` и шлюзом `10.0.0.1`.  
   Автоматическое подключение для данного профиля отключено.

4. Повторно выведен список сетевых подключений.  
   В конфигурации присутствуют профили **dhcp**, **static**, **enp0s3** и **lo**.

5. Выполнено переключение на статическое соединение **static**.  
   Проверка показала, что интерфейсу enp0s3 назначен IPv4-адрес `10.0.0.10/24`.

   ![Активация статического подключения](Screenshot_8.png)

6. Выполнён возврат к соединению **dhcp**.  
   После активации интерфейс enp0s3 вновь получил динамический IPv4-адрес `10.0.2.15/24`.

   ![Возврат к DHCP-подключению](Screenshot_9.png)

## Изменение параметров соединения с помощью nmcli

1. Для статического сетевого соединения отключено автоматическое подключение при загрузке системы.  
   Это позволяет вручную управлять активацией профиля и предотвращает его автоматическое включение при наличии других активных соединений.

   ![Отключение автоподключения и изменение параметров static](Screenshot_10.png)

2. В статическое соединение добавлен DNS-сервер `10.0.0.10`.  
   Данный адрес будет использоваться системой для разрешения доменных имён при активном статическом профиле.

   В ходе выполнения отмечено различие синтаксиса:
   - при **создании** соединения используется параметр `ip4`;
   - при **изменении** уже существующего соединения используется параметр `ipv4`.

3. В статическое соединение добавлен второй DNS-сервер `8.8.8.8`.  
   Для добавления дополнительного значения использован знак `+`, что позволило сохранить ранее заданный DNS-адрес и расширить список серверов, а не заменить его.

4. Выполнено изменение основного IPv4-адреса статического соединения.  
   Новый адрес интерфейса установлен как `10.0.0.20/24`, что соответствует подсети с маской 255.255.255.0.

5. К статическому соединению добавлен второй IPv4-адрес `10.20.30.40/16`.  
   В результате интерфейс получил несколько IPv4-адресов, относящихся к разным подсетям, что позволяет обслуживать несколько сетевых сегментов одновременно.

6. После внесения всех изменений статическое соединение активировано.  
   Проверка показала:
   - профиль **static** находится в активном состоянии;
   - интерфейсу **enp0s3** назначены два IPv4-адреса:
     - `10.0.0.20/24`,
     - `10.20.30.40/16`.

   Это подтверждает корректное применение параметров конфигурации.

   ![Активация static и проверка IP-адресов](Screenshot_11.png)

7. С помощью утилиты **nmtui** выполнен просмотр настроек сети в текстовом интерфейсе.  
   В разделе редактирования соединения **static** отображены:
   - ручная конфигурация IPv4;
   - два заданных IPv4-адреса;
   - шлюз по умолчанию `10.0.0.1`;
   - DNS-серверы `10.0.0.10` и `8.8.8.8`;
   - отключённое автоподключение соединения.

   Интерфейс nmtui наглядно отражает параметры, ранее заданные с помощью nmcli.

   ![Просмотр настроек static в nmtui](Screenshot_12.png)

8. Выполнен просмотр сетевых настроек в графическом интерфейсе операционной системы.  
   Для статического соединения отображаются:
   - активный профиль **static**;
   - основной IPv4-адрес `10.20.30.40`;
   - корректно заданный шлюз по умолчанию;
   - список DNS-серверов;
   - MAC-адрес сетевого адаптера;
   - доступность соединения для всех пользователей системы.

   Аналогичным образом проверены параметры соединения **dhcp**, где IPv4-адрес назначается автоматически.

   ![Настройки static в графическом интерфейсе](Screenshot_13.png)  
   ![Настройки dhcp в графическом интерфейсе](Screenshot_14.png)

9. Выполнено переключение на первоначальное сетевое соединение, использующее DHCP.  
   После активации данного профиля интерфейс **enp0s3** вновь получил динамический IPv4-адрес из подсети `10.0.2.0/24`.

   Проверка состояния соединения подтвердила успешное возвращение к исходной сетевой конфигурации.

## Вывод

В ходе работы была изучена и проверена конфигурация сетевых интерфейсов в операционной системе Linux. Получены навыки анализа состояния сетевых интерфейсов, маршрутизации и назначенных IP-адресов с использованием утилит ip, ifconfig, ss и ping.

Освоено управление сетевыми подключениями с помощью NetworkManager и инструмента nmcli, включая создание, изменение и переключение между DHCP- и статическими профилями. Практически отработано назначение нескольких IPv4-адресов одному интерфейсу, настройка DNS-серверов и параметров автоподключения.

Дополнительно рассмотрены способы просмотра и проверки сетевых настроек через текстовый интерфейс nmtui и графический интерфейс операционной системы. Полученные результаты подтверждают корректную работу сетевой подсистемы и правильность выполненной конфигурации.

# Контрольные вопросы

**1. Какая команда отображает только статус соединения, но не IP-адрес?**  
`ip link show` — отображает состояние сетевых интерфейсов (UP/DOWN), тип интерфейса и MAC-адрес, но не выводит назначенные IP-адреса.  
Также для NetworkManager: `nmcli device status` — показывает состояние устройств без детальной IP-конфигурации.

**2. Какая служба управляет сетью в ОС типа RHEL?**  
Сетевыми подключениями управляет служба **NetworkManager**.

**3. Какой файл содержит имя узла (устройства) в ОС типа RHEL?**  
Имя узла хранится в файле `/etc/hostname`.

**4. Какая команда позволяет задать имя узла (устройства)?**  
`hostnamectl set-hostname <имя>` — устанавливает новое имя узла системы.

**5. Какой конфигурационный файл можно изменить для включения разрешения имён для конкретного IP-адреса?**  
`/etc/hosts` — позволяет сопоставлять IP-адреса и имена узлов вручную.

**6. Какая команда показывает текущую конфигурацию маршрутизации?**  
`ip route show` — отображает таблицу маршрутизации системы.

**7. Как проверить текущий статус службы NetworkManager?**  
`systemctl status NetworkManager` — показывает текущее состояние службы.

**8. Какая команда позволяет изменить текущий IP-адрес и шлюз по умолчанию для сетевого соединения?**  
`nmcli connection modify` — используется для изменения IP-адреса, шлюза и других параметров сетевого подключения NetworkManager.
